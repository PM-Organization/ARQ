{"ast":null,"code":"var _jsxFileName = \"/home/pmorales/Downloads/Proyecto-B2B/Hotel/frontend/sistema_hoteles/src/components/LoginPage.jsx\";\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useUser } from './UserContext';\nimport { Form, Button, Container, Row, Col, Alert } from 'react-bootstrap';\nconst LoginPage = () => {\n  const [credentials, setCredentials] = useState({\n    email: '',\n    password: ''\n  });\n  const [loginMessage, setLoginMessage] = useState('');\n  const [showAlert, setShowAlert] = useState(false);\n  const [alertVariant, setAlertVariant] = useState('success');\n  const navigate = useNavigate();\n  const {\n    login\n  } = useUser();\n  const handleChange = e => {\n    setCredentials({\n      ...credentials,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log('Attempting to log in with credentials:', credentials); // Log de intento de inicio de sesión\n    try {\n      const response = await fetch('http://localhost:8080/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n      });\n      const data = await response.json();\n      console.log('Login response data:', data); // Log de la respuesta del servidor\n\n      if (response.ok) {\n        login(data);\n        console.log('Login successful:', data); // Log exitoso de inicio de sesión\n\n        localStorage.setItem('user', JSON.stringify(data));\n        navigate('/perfil'); // Redirige al usuario al perfil\n      } else {\n        throw new Error('Inicio de sesión fallido');\n      }\n    } catch (error) {\n      console.error('Login error:', error); // Log de error de inicio de sesión\n\n      setLoginMessage(error.message || 'Error al conectar con el servidor.');\n      setShowAlert(true);\n      setAlertVariant('danger');\n    }\n  };\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"my-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, showAlert && /*#__PURE__*/React.createElement(Alert, {\n    variant: alertVariant,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, loginMessage), /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, \"Iniciar Sesi\\xF3n\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formBasicEmail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }, \"Correo Electr\\xF3nico\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"email\",\n    placeholder: \"Ingrese su correo\",\n    name: \"email\",\n    value: credentials.email,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formBasicPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, \"Contrase\\xF1a\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Contrase\\xF1a\",\n    name: \"password\",\n    value: credentials.password,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    type: \"submit\",\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \"Iniciar Sesi\\xF3n\")))));\n};\nexport default LoginPage;","map":{"version":3,"names":["React","useState","useNavigate","useUser","Form","Button","Container","Row","Col","Alert","LoginPage","credentials","setCredentials","email","password","loginMessage","setLoginMessage","showAlert","setShowAlert","alertVariant","setAlertVariant","navigate","login","handleChange","e","target","name","value","handleSubmit","preventDefault","console","log","response","fetch","method","headers","body","JSON","stringify","data","json","ok","localStorage","setItem","Error","error","message","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","variant","md","onSubmit","Group","controlId","Label","Control","type","placeholder","onChange"],"sources":["/home/pmorales/Downloads/Proyecto-B2B/Hotel/frontend/sistema_hoteles/src/components/LoginPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useUser } from './UserContext'; \nimport { Form, Button, Container, Row, Col, Alert } from 'react-bootstrap';\n\nconst LoginPage = () => {\n  const [credentials, setCredentials] = useState({\n    email: '',\n    password: ''\n  });\n  const [loginMessage, setLoginMessage] = useState('');\n  const [showAlert, setShowAlert] = useState(false);\n  const [alertVariant, setAlertVariant] = useState('success');\n  const navigate = useNavigate();\n  const { login } = useUser(); \n\n  const handleChange = (e) => {\n    setCredentials({ ...credentials, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    console.log('Attempting to log in with credentials:', credentials); // Log de intento de inicio de sesión\n    try {\n      const response = await fetch('http://localhost:8080/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(credentials),\n      });\n      const data = await response.json();\n      console.log('Login response data:', data); // Log de la respuesta del servidor\n\n      if (response.ok) {\n        login(data);\n        console.log('Login successful:', data); // Log exitoso de inicio de sesión\n\n        localStorage.setItem('user', JSON.stringify(data)); \n        navigate('/perfil'); // Redirige al usuario al perfil\n      } else {\n        throw new Error('Inicio de sesión fallido');\n      }\n    } catch (error) {\n      console.error('Login error:', error); // Log de error de inicio de sesión\n\n      setLoginMessage(error.message || 'Error al conectar con el servidor.');\n      setShowAlert(true);\n      setAlertVariant('danger');\n    }\n  };\n\n  return (\n    <Container className=\"my-5\">\n      {showAlert && <Alert variant={alertVariant}>{loginMessage}</Alert>}\n      <Row className=\"justify-content-md-center\">\n        <Col md={6}>\n          <h2 className=\"mb-4\">Iniciar Sesión</h2>\n          <Form onSubmit={handleSubmit}>\n            <Form.Group controlId=\"formBasicEmail\">\n              <Form.Label>Correo Electrónico</Form.Label>\n              <Form.Control\n                type=\"email\"\n                placeholder=\"Ingrese su correo\"\n                name=\"email\"\n                value={credentials.email}\n                onChange={handleChange}\n              />\n            </Form.Group>\n\n            <Form.Group controlId=\"formBasicPassword\">\n              <Form.Label>Contraseña</Form.Label>\n              <Form.Control\n                type=\"password\"\n                placeholder=\"Contraseña\"\n                name=\"password\"\n                value={credentials.password}\n                onChange={handleChange}\n              />\n            </Form.Group>\n\n            <Button variant=\"primary\" type=\"submit\" className=\"mt-3\">\n              Iniciar Sesión\n            </Button>\n          </Form>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default LoginPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
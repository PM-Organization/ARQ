{"ast":null,"code":"var _jsxFileName = \"/home/pmorales/Downloads/Proyecto-B2B/Hotel/frontend/sistema_hoteles/src/components/CheckoutPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Button, Form, Row, Col, Modal } from 'react-bootstrap';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useUser } from './UserContext';\nimport emailjs from 'emailjs-com';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CheckoutPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    user\n  } = useUser();\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const {\n    hotelDetails,\n    roomDetails\n  } = location.state;\n\n  // Log para verificar los detalles del hotel recibidos\n  console.log(\"Hotel details received:\", hotelDetails);\n  const [reservationData, setReservationData] = useState({\n    checkIn: '',\n    checkOut: '',\n    totalReserva: 0\n  });\n  const calculateTotalReserva = () => {\n    if (reservationData.checkIn && reservationData.checkOut && roomDetails.roomPrice) {\n      const checkInDate = new Date(reservationData.checkIn);\n      const checkOutDate = new Date(reservationData.checkOut);\n      const diffTime = Math.abs(checkOutDate.getTime() - checkInDate.getTime());\n      const diffDays = Math.ceil(diffTime / (1000 * 3600 * 24));\n      const totalReservaCalculado = diffDays * roomDetails.roomPrice;\n      setReservationData(prevState => ({\n        ...prevState,\n        totalReserva: totalReservaCalculado\n      }));\n    }\n  };\n  useEffect(() => {\n    calculateTotalReserva();\n  }, [reservationData.checkIn, reservationData.checkOut, roomDetails.roomPrice]);\n  const handleInputChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setReservationData(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const formattedCheckIn = new Date(reservationData.checkIn).toISOString().split('T')[0];\n    const formattedCheckOut = new Date(reservationData.checkOut).toISOString().split('T')[0];\n\n    // Datos para verificar la disponibilidad\n    const verificarDisponibilidadData = {\n      idHabitacion: roomDetails.idHabitacion,\n      fechaIngreso: formattedCheckIn,\n      fechaSalida: formattedCheckOut\n    };\n\n    // Verificar disponibilidad primero\n    const responseDisponibilidad = await fetch('http://localhost:8080/reservas/verificar-disponibilidad', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(verificarDisponibilidadData)\n    });\n    const disponibilidad = await responseDisponibilidad.json();\n    if (!disponibilidad.esDisponible) {\n      alert('La habitación no está disponible para las fechas seleccionadas. Por favor, elige otras fechas.');\n      return; // Detiene la función aquí si no hay disponibilidad\n    }\n\n    // Datos finales de la reserva, solo si la habitación está disponible\n    const finalReservationData = {\n      idHabitacion: roomDetails.idHabitacion,\n      idHotel: hotelDetails.id_hotel,\n      idUsuario: user.id,\n      codigoReserva: Math.floor(Math.random() * 1000000),\n      fechaIngreso: formattedCheckIn,\n      fechaSalida: formattedCheckOut,\n      totalReserva: reservationData.totalReserva,\n      personasReserva: roomDetails.capacidadPersonas\n    };\n    console.log(\"Final reservation data being sent:\", finalReservationData);\n    console.log(\"Hotel ID being sent:\", hotelDetails.id_hotel);\n    console.log(\"Hotel details received:\", hotelDetails);\n    console.log(\"Room details received:\", roomDetails);\n    try {\n      const response = await fetch('http://localhost:8080/reservas', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(finalReservationData)\n      });\n      if (!response.ok) {\n        throw new Error('Error al crear la reserva');\n      }\n      const templateParams = {\n        to_name: user.primer_nombre,\n        hotel_name: hotelDetails.nombre,\n        room_number: roomDetails.numeroHabitacion.toString(),\n        check_in_date: formattedCheckIn,\n        check_out_date: formattedCheckOut,\n        total_nights: calculateNights(reservationData.checkIn, reservationData.checkOut).toString(),\n        total_price: `$${reservationData.totalReserva}`,\n        reservation_code: finalReservationData.codigoReserva,\n        to_email: user.email // Asumiendo que 'user' tiene un campo 'email'\n      };\n      emailjs.send('service_db-dw', 'template_0idkwyf', templateParams, 'BLyjSRydByFGcVhN6').then(response => {\n        console.log('Email sent successfully', response.text);\n      }, error => {\n        console.error('Failed to send email.', error);\n      });\n      setShowSuccessModal(true);\n    } catch (error) {\n      alert('Hubo un error al procesar tu reserva. Por favor, intenta nuevamente.');\n      console.error('Error en la reserva:', error);\n    }\n  };\n  const [isRoomAvailable, setIsRoomAvailable] = useState(true);\n  useEffect(() => {\n    const verificarDisponibilidad = async () => {\n      if (reservationData.checkIn && reservationData.checkOut) {\n        // Asumiendo que tienes una endpoint en tu API para verificar la disponibilidad\n        try {\n          const response = await fetch(`http://localhost:8080/verificar-disponibilidad`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              idHabitacion: roomDetails.idHabitacion,\n              fechaIngreso: new Date(reservationData.checkIn).toISOString().split('T')[0],\n              fechaSalida: new Date(reservationData.checkOut).toISOString().split('T')[0]\n            })\n          });\n          const disponibilidad = await response.json();\n          setIsRoomAvailable(disponibilidad.esDisponible);\n        } catch (error) {\n          console.error('Error verificando disponibilidad:', error);\n        }\n      }\n    };\n    verificarDisponibilidad();\n  }, [reservationData.checkIn, reservationData.checkOut, roomDetails.idHabitacion]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"my-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Checkout de la Reserva\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), hotelDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Reservando en: \", hotelDetails.nombre, \", \", hotelDetails.ciudad, \", \", hotelDetails.pais]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Tipo de habitaci\\xF3n: \", roomDetails.roomType, \", Precio por noche: $\", roomDetails.roomPrice]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Total estimado: $\", reservationData.totalReserva.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"checkIn\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Fecha de Check-In\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"date\",\n              name: \"checkIn\",\n              value: reservationData.checkIn,\n              onChange: handleInputChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"checkOut\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Fecha de Check-Out\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"date\",\n              name: \"checkOut\",\n              value: reservationData.checkOut,\n              onChange: handleInputChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"cardNumber\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"N\\xFAmero de Tarjeta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              pattern: \"\\\\d{16}\",\n              placeholder: \"1234 5678 9012 3456\",\n              maxLength: \"16\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n              className: \"text-muted\",\n              children: \"Ingrese los 16 d\\xEDgitos de su tarjeta de cr\\xE9dito sin espacios.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 3,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"cardExpiration\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Fecha de Expiraci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"month\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 3,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"cardCVV\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"CVV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              pattern: \"\\\\d{3}\",\n              placeholder: \"123\",\n              maxLength: \"3\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n              className: \"text-muted\",\n              children: \"3 d\\xEDgitos en el reverso de la tarjeta.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"mb-3\",\n        children: \"Direcci\\xF3n de Cobro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"billingAddressLine1\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Direcci\\xF3n (L\\xEDnea 1)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: \"Calle y n\\xFAmero\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"billingAddressLine2\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Direcci\\xF3n (L\\xEDnea 2)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: \"Apartamento, suite, unidad, etc. (opcional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"billingCity\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Ciudad\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"billingStateProvince\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Estado/Provincia\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"billingPostalCode\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"C\\xF3digo Postal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"billingCountry\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Pa\\xEDs\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"select\",\n              defaultValue: \"Elija...\",\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Elija...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Estados Unidos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"M\\xE9xico\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Canad\\xE1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 5\n      }, this), !isRoomAvailable && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        role: \"alert\",\n        children: \"La habitaci\\xF3n no est\\xE1 disponible para las fechas seleccionadas. Por favor, elige otras fechas.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        disabled: !isRoomAvailable,\n        children: \"Confirmar Reserva\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showSuccessModal,\n      onHide: () => setShowSuccessModal(false),\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Reserva Confirmada\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: \"Tu reserva ha sido confirmada con \\xE9xito.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => setShowSuccessModal(false),\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 5\n  }, this);\n};\n_s(CheckoutPage, \"gF0DdQhYZVpvnztbDfOUlkZnpwM=\", false, function () {\n  return [useNavigate, useLocation, useUser];\n});\n_c = CheckoutPage;\nexport default CheckoutPage;\nvar _c;\n$RefreshReg$(_c, \"CheckoutPage\");","map":{"version":3,"names":["React","useState","useEffect","Container","Button","Form","Row","Col","Modal","useNavigate","useLocation","useUser","emailjs","jsxDEV","_jsxDEV","CheckoutPage","_s","navigate","location","user","showSuccessModal","setShowSuccessModal","hotelDetails","roomDetails","state","console","log","reservationData","setReservationData","checkIn","checkOut","totalReserva","calculateTotalReserva","roomPrice","checkInDate","Date","checkOutDate","diffTime","Math","abs","getTime","diffDays","ceil","totalReservaCalculado","prevState","handleInputChange","event","name","value","target","handleSubmit","preventDefault","formattedCheckIn","toISOString","split","formattedCheckOut","verificarDisponibilidadData","idHabitacion","fechaIngreso","fechaSalida","responseDisponibilidad","fetch","method","headers","body","JSON","stringify","disponibilidad","json","esDisponible","alert","finalReservationData","idHotel","id_hotel","idUsuario","id","codigoReserva","floor","random","personasReserva","capacidadPersonas","response","ok","Error","templateParams","to_name","primer_nombre","hotel_name","nombre","room_number","numeroHabitacion","toString","check_in_date","check_out_date","total_nights","calculateNights","total_price","reservation_code","to_email","email","send","then","text","error","isRoomAvailable","setIsRoomAvailable","verificarDisponibilidad","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ciudad","pais","roomType","toFixed","onSubmit","Group","controlId","Label","Control","type","onChange","required","md","pattern","placeholder","maxLength","Text","as","defaultValue","role","variant","disabled","show","onHide","Header","closeButton","Title","Body","Footer","onClick","_c","$RefreshReg$"],"sources":["/home/pmorales/Downloads/Proyecto-B2B/Hotel/frontend/sistema_hoteles/src/components/CheckoutPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Button, Form, Row, Col, Modal } from 'react-bootstrap';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useUser } from './UserContext';\nimport emailjs from 'emailjs-com';\n\n\nconst CheckoutPage = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user } = useUser();\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const { hotelDetails, roomDetails } = location.state;\n\n  // Log para verificar los detalles del hotel recibidos\n  console.log(\"Hotel details received:\", hotelDetails);\n\n  const [reservationData, setReservationData] = useState({\n    checkIn: '',\n    checkOut: '',\n    totalReserva: 0,\n  });\n\n  const calculateTotalReserva = () => {\n    if (reservationData.checkIn && reservationData.checkOut && roomDetails.roomPrice) {\n      const checkInDate = new Date(reservationData.checkIn);\n      const checkOutDate = new Date(reservationData.checkOut);\n      const diffTime = Math.abs(checkOutDate.getTime() - checkInDate.getTime());\n      const diffDays = Math.ceil(diffTime / (1000 * 3600 * 24));\n      const totalReservaCalculado = diffDays * roomDetails.roomPrice;\n      setReservationData(prevState => ({\n        ...prevState,\n        totalReserva: totalReservaCalculado,\n      }));\n    }\n  };\n\n  useEffect(() => {\n    calculateTotalReserva();\n  }, [reservationData.checkIn, reservationData.checkOut, roomDetails.roomPrice]);\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    setReservationData(prevState => ({ ...prevState, [name]: value }));\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const formattedCheckIn = new Date(reservationData.checkIn).toISOString().split('T')[0];\n    const formattedCheckOut = new Date(reservationData.checkOut).toISOString().split('T')[0];\n    \n    // Datos para verificar la disponibilidad\n    const verificarDisponibilidadData = {\n      idHabitacion: roomDetails.idHabitacion,\n      fechaIngreso: formattedCheckIn,\n      fechaSalida: formattedCheckOut,\n    };\n  \n    // Verificar disponibilidad primero\n    const responseDisponibilidad = await fetch('http://localhost:8080/reservas/verificar-disponibilidad', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(verificarDisponibilidadData),\n    });\n  \n    const disponibilidad = await responseDisponibilidad.json();\n  \n    if (!disponibilidad.esDisponible) {\n      alert('La habitación no está disponible para las fechas seleccionadas. Por favor, elige otras fechas.');\n      return; // Detiene la función aquí si no hay disponibilidad\n    }\n  \n    // Datos finales de la reserva, solo si la habitación está disponible\n    const finalReservationData = {\n      idHabitacion: roomDetails.idHabitacion,\n      idHotel: hotelDetails.id_hotel, \n      idUsuario: user.id,\n      codigoReserva: Math.floor(Math.random() * 1000000),\n      fechaIngreso: formattedCheckIn,\n      fechaSalida: formattedCheckOut,\n      totalReserva: reservationData.totalReserva,\n      personasReserva: roomDetails.capacidadPersonas,\n    };\n    \n    console.log(\"Final reservation data being sent:\", finalReservationData);\n    console.log(\"Hotel ID being sent:\", hotelDetails.id_hotel);  \n    console.log(\"Hotel details received:\", hotelDetails);\n    console.log(\"Room details received:\", roomDetails);\n    \n    try {\n      const response = await fetch('http://localhost:8080/reservas', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(finalReservationData),\n      });\n  \n      if (!response.ok) {\n        throw new Error('Error al crear la reserva');\n      }\n\n\n\n      const templateParams = {\n        to_name: user.primer_nombre,\n        hotel_name: hotelDetails.nombre,\n        room_number: roomDetails.numeroHabitacion.toString(),\n        check_in_date: formattedCheckIn,\n        check_out_date: formattedCheckOut,\n        total_nights: calculateNights(reservationData.checkIn, reservationData.checkOut).toString(),\n        total_price: `$${reservationData.totalReserva}`,\n        reservation_code: finalReservationData.codigoReserva,\n        to_email: user.email, // Asumiendo que 'user' tiene un campo 'email'\n      };\n  \n      emailjs.send('service_db-dw', 'template_0idkwyf', templateParams, 'BLyjSRydByFGcVhN6')\n        .then((response) => {\n          console.log('Email sent successfully', response.text);\n        }, (error) => {\n          console.error('Failed to send email.', error);\n        });\n  \n      setShowSuccessModal(true);\n    } catch (error) {\n      alert('Hubo un error al procesar tu reserva. Por favor, intenta nuevamente.');\n      console.error('Error en la reserva:', error);\n    }\n  };\n  \n\n\n  const [isRoomAvailable, setIsRoomAvailable] = useState(true);\n  useEffect(() => {\n    const verificarDisponibilidad = async () => {\n      if (reservationData.checkIn && reservationData.checkOut) {\n        // Asumiendo que tienes una endpoint en tu API para verificar la disponibilidad\n        try {\n          const response = await fetch(`http://localhost:8080/verificar-disponibilidad`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              idHabitacion: roomDetails.idHabitacion,\n              fechaIngreso: new Date(reservationData.checkIn).toISOString().split('T')[0],\n              fechaSalida: new Date(reservationData.checkOut).toISOString().split('T')[0],\n            }),\n          });\n          const disponibilidad = await response.json();\n          setIsRoomAvailable(disponibilidad.esDisponible);\n        } catch (error) {\n          console.error('Error verificando disponibilidad:', error);\n        }\n      }\n    };\n    verificarDisponibilidad();\n  }, [reservationData.checkIn, reservationData.checkOut, roomDetails.idHabitacion]);\n  \n\n\n  return (\n    <Container className=\"my-5\">\n      <h2>Checkout de la Reserva</h2>\n      {/* Detalles del hotel y la habitación */}\n      {hotelDetails && (\n        <div>\n          <p>Reservando en: {hotelDetails.nombre}, {hotelDetails.ciudad}, {hotelDetails.pais}</p>\n          <p>Tipo de habitación: {roomDetails.roomType}, Precio por noche: ${roomDetails.roomPrice}</p>\n          <p>Total estimado: ${reservationData.totalReserva.toFixed(2)}</p>\n        </div>\n      )}\n\n      {/* Formulario de reserva */}\n      <Form onSubmit={handleSubmit}>\n        {/* Fechas de check-in y check-out */}\n        <Row className=\"mb-3\">\n          <Col>\n            <Form.Group controlId=\"checkIn\">\n              <Form.Label>Fecha de Check-In</Form.Label>\n              <Form.Control type=\"date\" name=\"checkIn\" value={reservationData.checkIn} onChange={handleInputChange} required />\n            </Form.Group>\n          </Col>\n          <Col>\n            <Form.Group controlId=\"checkOut\">\n              <Form.Label>Fecha de Check-Out</Form.Label>\n              <Form.Control type=\"date\" name=\"checkOut\" value={reservationData.checkOut} onChange={handleInputChange} required />\n            </Form.Group>\n          </Col>\n        </Row>\n        \n\n        <Row className=\"mb-3\">\n      <Col md={6}>\n        <Form.Group controlId=\"cardNumber\">\n          <Form.Label>Número de Tarjeta</Form.Label>\n          <Form.Control type=\"text\" pattern=\"\\d{16}\" placeholder=\"1234 5678 9012 3456\" maxLength=\"16\" required />\n          <Form.Text className=\"text-muted\">\n            Ingrese los 16 dígitos de su tarjeta de crédito sin espacios.\n          </Form.Text>\n        </Form.Group>\n      </Col>\n      <Col md={3}>\n        <Form.Group controlId=\"cardExpiration\">\n          <Form.Label>Fecha de Expiración</Form.Label>\n          <Form.Control type=\"month\" required />\n        </Form.Group>\n      </Col>\n      <Col md={3}>\n        <Form.Group controlId=\"cardCVV\">\n          <Form.Label>CVV</Form.Label>\n          <Form.Control type=\"text\" pattern=\"\\d{3}\" placeholder=\"123\" maxLength=\"3\" required />\n          <Form.Text className=\"text-muted\">\n            3 dígitos en el reverso de la tarjeta.\n          </Form.Text>\n        </Form.Group>\n      </Col>\n    </Row>\n\n    <h4 className=\"mb-3\">Dirección de Cobro</h4>\n    <Row className=\"mb-3\">\n      <Col md={6}>\n        <Form.Group controlId=\"billingAddressLine1\">\n          <Form.Label>Dirección (Línea 1)</Form.Label>\n          <Form.Control type=\"text\" placeholder=\"Calle y número\" required />\n        </Form.Group>\n      </Col>\n      <Col md={6}>\n        <Form.Group controlId=\"billingAddressLine2\">\n          <Form.Label>Dirección (Línea 2)</Form.Label>\n          <Form.Control type=\"text\" placeholder=\"Apartamento, suite, unidad, etc. (opcional)\" />\n        </Form.Group>\n      </Col>\n      <Col md={4}>\n        <Form.Group controlId=\"billingCity\">\n          <Form.Label>Ciudad</Form.Label>\n          <Form.Control type=\"text\" required />\n        </Form.Group>\n      </Col>\n      <Col md={4}>\n        <Form.Group controlId=\"billingStateProvince\">\n          <Form.Label>Estado/Provincia</Form.Label>\n          <Form.Control type=\"text\" required />\n        </Form.Group>\n      </Col>\n      <Col md={4}>\n        <Form.Group controlId=\"billingPostalCode\">\n          <Form.Label>Código Postal</Form.Label>\n          <Form.Control type=\"text\" required />\n        </Form.Group>\n      </Col>\n      <Col md={6}>\n        <Form.Group controlId=\"billingCountry\">\n          <Form.Label>País</Form.Label>\n          <Form.Control as=\"select\" defaultValue=\"Elija...\" required>\n            {/* Opciones de países */}\n            <option>Elija...</option>\n            <option>Estados Unidos</option>\n            <option>México</option>\n            <option>Canadá</option>\n\n          </Form.Control>\n        </Form.Group>\n      </Col>\n    </Row>\n\n\n\n\n  {\n    !isRoomAvailable && (\n      <div className=\"alert alert-danger\" role=\"alert\">\n        La habitación no está disponible para las fechas seleccionadas. Por favor, elige otras fechas.\n      </div>\n    )\n  }\n  <Button variant=\"primary\" type=\"submit\" disabled={!isRoomAvailable}>Confirmar Reserva</Button>\n</Form>\n\n\n\n\n\n\n      {/* Modal de éxito */}\n      <Modal show={showSuccessModal} onHide={() => setShowSuccessModal(false)}>\n        <Modal.Header closeButton>\n          <Modal.Title>Reserva Confirmada</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>Tu reserva ha sido confirmada con éxito.</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={() => setShowSuccessModal(false)}>Cerrar</Button>\n        </Modal.Footer>\n      </Modal>\n    </Container>\n  );\n};\n\nexport default CheckoutPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}